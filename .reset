const exec=require('child_process').exec;!function e(){exec('git log',(r,o,c)=>{if(r)return void console.error(`git log error: ${r}`);let s=o.match(/commit\s+\w{7}/g);s&&s.length>2?exec('git reset --hard HEAD^',(r,o,c)=>{r?console.error(`reset error: ${r}`):e()}):exec('git push -u origin master -f',(e,r,o)=>{e?console.error(`push error: ${e}`):console.error('push success')})})}();